function make_histogram(vocabulary_size,descriptor_type)


%% reading training files
fileID = fopen('Caltech4/ImageSets/train_vocab.txt','r');
A = textscan(fileID,'%s');
A = A{1};
length_of_images = length(A);
images = {length_of_images};
d =[];
for i = 1 : length_of_images
     images{i}  = imread(strcat('Caltech4/ImageData/',strcat(A{i},'.jpg')));
     image = images{i};
     
     [~,d_temp] = get_descriptor(image,descriptor_type,5);
     d = cat(2,d,d_temp);
end
fclose(fileID);

%% k-means clustering with vocabulary_size
[centers] = kmeans(single(d), vocabulary_size); 
centers = centers';
disp('Kmeans calculated');


%% histogram for each training image using HE fucntion
H_airplanes = image_path_to_hist('Caltech4/ImageSets/train_airplanes.txt',centers,vocabulary_size,descriptor_type,step_size);
file_name = strcat('part1/saved/H_airplanes' );
save(file_name,'H_airplanes');
disp('H_airplanes calculated');

H_motorbikes = image_path_to_hist('Caltech4/ImageSets/train_motorbikes.txt',centers,vocabulary_size,descriptor_type,step_size);
save('part1/saved/H_motorbikes','H_motorbikes');
disp('H_motorbikes calculated');


H_faces = image_path_to_hist('Caltech4/ImageSets/train_faces.txt',centers,vocabulary_size,descriptor_type,step_size);
save('part1/saved/H_faces','H_faces');
disp('H_faces calculated');


H_cars = image_path_to_hist('Caltech4/ImageSets/train_cars.txt',centers,vocabulary_size,descriptor_type,step_size);
save('part1/saved/H_cars','H_cars');
disp('H_cars calculated');


H_test = image_path_to_hist('Caltech4/ImageSets/test.txt',centers,vocabulary_size,descriptor_type,step_size);
save('H_test','H_test');
disp('H_test calculated');


end
